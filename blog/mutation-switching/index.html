<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Stryker Mutator Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Stryker Mutator Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-104444094-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Stryker Mutator" href="/opensearch.xml"><title data-react-helmet="true">Mutation switching in Stryker4s | Stryker Mutator</title><meta data-react-helmet="true" property="og:title" content="Mutation switching in Stryker4s | Stryker Mutator"><meta data-react-helmet="true" name="description" content="Learn how Stryker4s uses mutation switching to improve performance."><meta data-react-helmet="true" property="og:description" content="Learn how Stryker4s uses mutation switching to improve performance."><meta data-react-helmet="true" property="og:image" content="https://stryker-mutator.io/images/strykerman.png"><meta data-react-helmet="true" name="twitter:image" content="https://stryker-mutator.io/images/strykerman.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Mutation switching in Stryker4s | Stryker Mutator"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><link data-react-helmet="true" rel="shortcut icon" href="/images/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/styles.6b0a676a.css">
<link rel="preload" href="/styles.ae1f3984.js" as="script">
<link rel="preload" href="/runtime~main.5971ad9b.js" as="script">
<link rel="preload" href="/main.56b6f90f.js" as="script">
<link rel="preload" href="/1.5fac55c6.js" as="script">
<link rel="preload" href="/2.311a44f4.js" as="script">
<link rel="preload" href="/3.6913aaad.js" as="script">
<link rel="preload" href="/ccc49370.c7cf871d.js" as="script">
<link rel="preload" href="/a32dca28.caaa39d0.js" as="script">
<link rel="preload" href="/cf5dbeb2.351720f6.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/images/stryker.svg" alt="Stryker Mutator Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/images/stryker.svg" alt="Stryker Mutator Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Stryker Mutator</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/docs/stryker/introduction">For JavaScript</a><a class="navbar__item navbar__link" href="/docs/stryker-net/Introduction">For C#</a><a class="navbar__item navbar__link" href="/docs/stryker4s/getting-started">For Scala</a><a class="navbar__item navbar__link" href="/docs/General/example">An example</a></div><div class="navbar__items navbar__items--right"><a href="https://dashboard.stryker-mutator.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Dashboard</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository dropdown"></a><ul class="dropdown__menu"><li><a href="https://github.com/stryker-mutator/stryker" target="_blank" rel="noopener noreferrer" class="dropdown__link">Stryker (JS &amp; TS)</a></li><li><a href="https://github.com/stryker-mutator/stryker-net" target="_blank" rel="noopener noreferrer" class="dropdown__link">Stryker.NET (C#)</a></li><li><a href="https://github.com/stryker-mutator/stryker4s" target="_blank" rel="noopener noreferrer" class="dropdown__link">Stryker4s (Scala)</a></li><li><a href="https://github.com/stryker-mutator/mutation-testing-elements" target="_blank" rel="noopener noreferrer" class="dropdown__link">Mutation Testing Elements</a></li><li><a href="https://github.com/stryker-mutator/stryker-mutator.github.io" target="_blank" rel="noopener noreferrer" class="dropdown__link">This website</a></li></ul></div><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><div class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></div></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/images/stryker.svg" alt="Stryker Mutator Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/images/stryker.svg" alt="Stryker Mutator Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Stryker Mutator</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/stryker/introduction">For JavaScript</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/stryker-net/Introduction">For C#</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/stryker4s/getting-started">For Scala</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/General/example">An example</a></li><li class="menu__list-item"><a href="https://dashboard.stryker-mutator.io" target="_blank" rel="noopener noreferrer" class="menu__link">Dashboard</a></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" target="_self" rel="noopener noreferrer" role="button" class="menu__link menu__link--sublist header-github-link" aria-label="GitHub repository dropdown"></a><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/stryker-mutator/stryker" target="_blank" rel="noopener noreferrer" class="menu__link">Stryker (JS &amp; TS)</a></li><li class="menu__list-item"><a href="https://github.com/stryker-mutator/stryker-net" target="_blank" rel="noopener noreferrer" class="menu__link">Stryker.NET (C#)</a></li><li class="menu__list-item"><a href="https://github.com/stryker-mutator/stryker4s" target="_blank" rel="noopener noreferrer" class="menu__link">Stryker4s (Scala)</a></li><li class="menu__list-item"><a href="https://github.com/stryker-mutator/mutation-testing-elements" target="_blank" rel="noopener noreferrer" class="menu__link">Mutation Testing Elements</a></li><li class="menu__list-item"><a href="https://github.com/stryker-mutator/stryker-mutator.github.io" target="_blank" rel="noopener noreferrer" class="menu__link">This website</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--2"><div class="sidebar_SWld thin-scrollbar"><h3 class="sidebarItemTitle_Km2m">Recent posts</h3><ul class="sidebarItemList_3UpA"><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog/announcing-stryker-4-mutation-switching">Announcing Stryker 4.0 - Mutation Switching</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog/announcing-stryker-4-beta-mutation-switching">Announcing Stryker 4.0 Beta</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog/azure-pipelines-integration">Integrating Stryker.NET in your azure pipelines</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog/announcing-100-mode">Announcing Stryker 100% mode</a></li><li class="sidebarItem_2T0D"><a class="sidebarItemLink_v5H9" href="/blog/stryker-version-3">Announcing Stryker 3.0</a></li></ul></div></div><main class="col col--8"><article><header><h1 class="margin-bottom--sm blogPostTitle_3-lP">Mutation switching in Stryker4s</h1><div class="margin-vert--md"><time datetime="2018-10-06T00:00:00.000Z" class="blogPostDate_Ta7i">October 6, 2018  Â· 6 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/nicojs" target="_blank" rel="noreferrer noopener"><img src="https://avatars3.githubusercontent.com/u/1828233?s=400&amp;u=fec18ad3776aaafec54c49bbd7173a841ae7ea59&amp;v=4" alt="Nico Jansen"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/nicojs" target="_blank" rel="noreferrer noopener">Nico Jansen</a></h4><small class="avatar__subtitle">Stryker Team</small></div></div></header><section class="markdown"><p>Learn how Stryker4s uses mutation switching to improve performance.</p><p>We are very happy with Stryker&#x27;s new friends! One of those new friends is Stryker4s(cala).
Scala developers can now use mutation testing to improve their tests!
Creating a mutation testing framework for Scala comes with many challenges.
One of those challenges is the Scala compiler itself.
We all know it&#x27;s not the <a href="https://scala-ci.typesafe.com/grafana/dashboard/db/scala-benchmark?from=1429139130109&amp;to=1492531027936h&amp;orgId=1&amp;var-branch=2.11.x&amp;var-branch=2.12.x&amp;var-branch=2.13.x&amp;var-source=scala&amp;var-bench=HotScalacBenchmark.compile&amp;var-host=scalabench@scalabench@" target="_blank" rel="noopener noreferrer">fastest in its kind</a>.
One of the main goals of Stryker is to be fast. This means we need to come up with an intelligent way to introduce the mutants into the source code.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="attempt-one-compiling-each-mutation"></a>Attempt one: Compiling each mutation<a class="hash-link" href="#attempt-one-compiling-each-mutation" title="Direct link to heading">#</a></h2><p>One way of introducing mutants to a codebase is by mutating one statement, compile the code, run tests, gather the results and repeat.
This seems like a logical choice because it mimics the way a developer would go about it.</p><p>Let&#x27;s look at an example.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-scala codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">class Numbers {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    def greaterThan(a: Int, b: Int): Boolean = {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        a &gt; b</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        // Mutant 1: a &gt;= b</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        // Mutant 2: a &lt; b</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        // Mutant 3: a == b</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>As you can see, there are three possible mutants:</p><ol><li>Change <code>&gt;</code> to <code>&gt;=</code></li><li>Change <code>&gt;</code> to <code>&lt;</code></li><li>Change <code>&gt;</code> to <code>==</code></li></ol><p>If we apply the mutation one by one, we would need to compile the code base three times.
If we assume the compile time of this program is 10 seconds, we already have 30 seconds of compile time for one full mutation run.
This would quickly get out of hand when the codebase is bigger and generates more mutants.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="attempt-two-mutating-bytecode"></a>Attempt two: Mutating bytecode<a class="hash-link" href="#attempt-two-mutating-bytecode" title="Direct link to heading">#</a></h2><p>As you might know, Scala gets compiled to Java bytecode. This gives us an alternative way to introduce mutations in a codebase.
We would be able to mutate the bytecode directly, eliminating the need for recompiling.</p><p>The main challenge with this approach is that <a href="https://docs.scala-lang.org/overviews/core/binary-compatibility-of-scala-releases.html" target="_blank" rel="noopener noreferrer">Scala doesn&#x27;t guarantee the bytecode output for each version of the compiler</a> (or even JDK version).
Even the jump from Scala 2.12 to 2.13 produces different bytecode. This would make manipulating bytecode complicated, unpredictable and hard to maintain.</p><p>Furthermore, if you mutate the bytecode, it can be difficult to reproduce the exact Scala code that you changed.
Details, like the exact location, are not represented in bytecode.
Scala makes this extra challenging, as 1 <code>.scala</code> file can easily result in 100 <code>.class</code> files in bytecode.</p><p>For performance reasons, mutating bytecode might sound like a fast solution, but you would still need to load (or hot reload) the mutated class files
for each mutant.</p><p>There should be a better solution out there, right?</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="solution-mutation-switching"></a>Solution: Mutation switching<a class="hash-link" href="#solution-mutation-switching" title="Direct link to heading">#</a></h2><p>Mutation switching to the rescue! So how is mutation switching both <em>faster</em> and <em>more reliable</em> than compiling each mutation or mutating bytecode?
The steps are quite similar to &quot;Compiling each mutant&quot;, but with some big differences:</p><ol><li>All mutants are identified for the whole codebase.</li><li>All mutants are applied to the codebase <strong>at the same time</strong> using a <a href="https://docs.scala-lang.org/tour/pattern-matching.html" target="_blank" rel="noopener noreferrer">Scala Pattern match</a>.</li><li>All mutants are tested one by one, with only <strong>one mutant active at a time</strong>, using an environment variable.</li></ol><p>Step 2 is where the magic happens. Let&#x27;s take a look at the same code example as used previously, right after the mutations are applied.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-scala codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">class Numbers {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    def greaterThan(a: Int, b: Int): Boolean = {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        sys.env.get(&quot;ACTIVE_MUTATION&quot;) match {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            case Some(&quot;0&quot;) =&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                a &gt;= b</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            case Some(&quot;1&quot;) =&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                a &lt; b</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            case Some(&quot;2&quot;) =&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                a == b</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            case _ =&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                a &gt; b</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>All possible mutations are implemented in the pattern match. An identifier is used to turn on/off, or <em>switch</em>, specific mutations.
The default case will be used when none of the mutants are active. Now the code base only needs to be compiled once.
The extra time compilation takes because of its increased size is negligible compared to the overhead of compiling each mutant.
For example, if the compilation time for this code base
would be 15 seconds we will still gain 15 seconds compared to compiling each mutation.</p><p>We gain performance without losing flexibility. It&#x27;s a win-win scenario.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="top-statements"></a>Top statements<a class="hash-link" href="#top-statements" title="Direct link to heading">#</a></h2><p>Mutation switching sure is great, but let&#x27;s take a look at a more complex example.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-scala codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">def isEven(number: Int): Boolean = number % 2 == 0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">def isOdd(number: Int): Boolean = !isEven(number)</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">val numbers: List[Int] = 1 to 100 toList</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">def filterOddAnd(specialNumber: Int): List[Int] = {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  numbers</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    .filter(isOdd)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    .filterNot(_.equals(specialNumber))</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>With this code base <code>filter</code> and <code>filterNot</code> could be mutated to there counterparts.
This would give us the following code base if we implement the pattern match at the direct position.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-scala codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">def isEven(number: Int): Boolean = number % 2 == 0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">def isOdd(number: Int): Boolean = !isEven(number)</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">val numbers: List[Int] = 1 to 100 toList</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">def filterOddAnd(specialNumber: Int): List[Int] = {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  numbers.(sys.env.get(&quot;ACTIVE_MUTATION&quot;) match {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    case Some(&quot;0&quot;) =&gt; .filter(isOdd)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    case _         =&gt; .filterNot(isOdd)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  }).</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  (sys.env.get(&quot;ACTIVE_MUTATION&quot;) match {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    case Some(&quot;1&quot;) =&gt;  .filterNot(_.equals(specialNumber))</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    case _         =&gt;  .filter(_.equals(specialNumber))</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  })</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Because we wrapped the functions right on the spot we produced code that doesn&#x27;t even compile!
To make the code compile we need to take a closer look at the abstract syntax tree.
We are searching for the parent statement in this abstract syntax tree, which is <code>numbers</code> in our case.
If we implement mutation switching using the parent statement, we can generate the following code.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-Scala codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">def isEven(number: Int): Boolean = number % 2 == 0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">def isOdd(number: Int): Boolean = !isEven(number)</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">val numbers: List[Int] = 1 to 100 toList</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">def filterOddAnd(specialNumber: Int): List[Int] = {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  sys.env.get(&quot;ACTIVE_MUTATION&quot;) match {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    case Some(&quot;0&quot;) =&gt; numbers.filterNot(isOdd).filter(_.equals(specialNumber))</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    case Some(&quot;1&quot;) =&gt; numbers.filter(isOdd).filter(_.equals(specialNumber))</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    case _         =&gt; numbers.filter(isOdd).filterNot(_.equals(specialNumber))</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This enables us to get clean, readable pattern matches and avoid compilation errors.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="whats-next"></a>What&#x27;s next?<a class="hash-link" href="#whats-next" title="Direct link to heading">#</a></h2><p>With mutation switching in place, the road is clear for even bigger performance improvements. Right now, we&#x27;re not
keeping the testing process alive. We simply run <code>sbt test</code> with the correct mutant switched on.
Keeping the test process alive and rerunning the tests after switching mutants is where we can really put the pedal to the metal!</p><p>Interested to help? We&#x27;re very much looking for contributions! Take a look at our <a href="https://github.com/stryker-mutator/stryker4s/issues" target="_blank" rel="noopener noreferrer">issue tracker</a>
or contact us on <a href="https://join.slack.com/t/stryker-mutator/shared_invite/enQtOTUyMTYyNTg1NDQ0LTU4ODNmZDlmN2I3MmEyMTVhYjZlYmJkOThlNTY3NTM1M2QxYmM5YTM3ODQxYmJjY2YyYzllM2RkMmM1NjNjZjM" target="_blank" rel="noopener noreferrer">Slack</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="conclusion"></a>Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">#</a></h2><p>With the combination of mutation switching and traversing to the parent statements Stryker4s is able to apply mutations to the codebase
in a clean and understandable fashion and keep the chances of compilation errors to a minimum.
We hope this blog gave some insight on mutation switching works and how Stryker4s uses this to its advantage. Happy mutating!</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog/tags/stryker-4-s">stryker4s</a></div></footer></article><div><a href="https://github.com/stryker-mutator/stryker-mutator.github.io/edit/develop/blog/2018-10-06-mutation-switching.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/announcing-stryker-0-34"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« Announcing Stryker 0.34</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/csharp-and-scala-support"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Introducing Stryker.NET and Stryker4s Â»</div></a></div></nav></div></main><div class="col col--2"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#attempt-one-compiling-each-mutation" class="table-of-contents__link">Attempt one: Compiling each mutation</a></li><li><a href="#attempt-two-mutating-bytecode" class="table-of-contents__link">Attempt two: Mutating bytecode</a></li><li><a href="#solution-mutation-switching" class="table-of-contents__link">Solution: Mutation switching</a></li><li><a href="#top-statements" class="table-of-contents__link">Top statements</a></li><li><a href="#whats-next" class="table-of-contents__link">What&#39;s next?</a></li><li><a href="#conclusion" class="table-of-contents__link">Conclusion</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/General/faq">FAQ</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://join.slack.com/t/stryker-mutator/shared_invite/enQtOTUyMTYyNTg1NDQ0LTU4ODNmZDlmN2I3MmEyMTVhYjZlYmJkOThlNTY3NTM1M2QxYmM5YTM3ODQxYmJjY2YyYzllM2RkMmM1NjNjZjM" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://twitter.com/stryker_mutator" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/stryker-mutator/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Stryker is released under the Apache 2.0 license. Site by the Stryker team (see GitHub). Logo by Selina van den Top.</div></div></div></footer></div>
<script src="/styles.ae1f3984.js"></script>
<script src="/runtime~main.5971ad9b.js"></script>
<script src="/main.56b6f90f.js"></script>
<script src="/1.5fac55c6.js"></script>
<script src="/2.311a44f4.js"></script>
<script src="/3.6913aaad.js"></script>
<script src="/ccc49370.c7cf871d.js"></script>
<script src="/a32dca28.caaa39d0.js"></script>
<script src="/cf5dbeb2.351720f6.js"></script>
</body>
</html>